{"version":3,"sources":["webpack:///./src/assets/img/src_assets_images_wenhao.png","webpack:///./src/components/invitation.vue?e93e","webpack:///./src/components/invitation.vue?a456","webpack:///src/components/invitation.vue","webpack:///./src/components/invitation.vue?b8a4","webpack:///./src/components/invitation.vue"],"names":["module","exports","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_invitation_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","render","_vm","this","_h","$createElement","_c","_self","staticClass","isUnlocked","_e","_v","attrs","type","on","click","validatePin","_s","value","$store","state","playerInfo","pid","src","__webpack_require__","alt","changeTipsStatus","list","swichList","staticRenderFns","invitationvue_type_script_lang_js_","name","components","TabList","components_switch","data","to","txParams","gasPrice","nonce","gasLimit","loading","watch","v","eventBus","$emit","computed","methods","index","status","_this","Object","validate","balance","mint_ui_common","prompt","inputType","then","_ref","action","privateKey","decrypt","localStorage","getItem","$message","message","duration","unlock","_this2","regName","Date","parse","toString","affId","getGasPriceAndNonce","results","rawTransaction","from","address","concat","contractAddress","contract","registerNameXID","getData","tx","es5_default","a","sign","keythereum","str2buf","serializedTx","serialize","Promise","resolve","reject","web3","eth","sendRawTransaction","err","hash","dispatch","components_invitationvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"static/js/view-components-invitation-vue.6e7a7b21.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAQAAAACj/OVAAAEyUlEQVRYw7WZf0hdZRjHP95dXaUzdbnc0OXc1VWk0EYUJsL6QcPMwUYRBLaIEYO1NVv0g9o0FhVUbPOPWPRH4YotKTZoUNGihAw2V9EPhr+mds100/krsTQ9/XHe+/qee895z3vu5nP/Ofec7/N833ve53ne53luCqayhNuppJRiCsgiE5hgjChd/EILPzHHVZNUHuIYo1iazyjHqCH1ysly2MeQlkr9DFFPjt5giubZtbzAHpY57o3QQQcTTJFCOpmUUBJHMclBXmc6+G+r4oKy9n/4lO2sdUUW8xQnmVHQF6gORraUw8wr6jv9XhSwnN10K6SNLDWlW8UZqTbANsLGCw3zpLLjZ1llorSOXqEwxyEyA29FFu/Kt/MHN/vBSxgU4Ivcl7RvVzEsrAyyTgfMJyqAv3HTFYXTWtqFpSj5XqA0uXdnDZzET1bws7DWRpo75JAAdJKrNZVNBVvZSgXLtbhcOoXFw26PHxRbPcxqTxMhHqNVCRiLNmo1XhxhROAS4jJD7N48VZ7qN/Kta0I7R6GnTrVYXpQM54NXZbh6v6AOTQ69xVPvPYE54NyVCRHm3nH3RRzJv45v7VznmYEuYmExQfbCzf1C7QlPui2K8e+5lzBQyBv8J+++4qm7QyD2L5x39hp6NNv/jTT8pQP1uLzfq8nM/eLFi/OyRqg87alyg/wl0wk+fE5S3uqp/5xA1NhfPxF74h3sFdLo0YRn78hnD3jq5zGLhUUzhEhlEwCnuKw5imPymUutk4iKl0FOA7CJNCgX69umrQt2coIT7E3Y5TB98heWaSzsEphyqBOXa5LKmG9KuighDa5UoOrgiKi6kpHXlGDZ41M72ZF+BFqwsPghMFkKBxW6Vt8S0T6JWhB78FFgwrcVul6DYqIZC4u+EFkAjAWke5k6eR1lIwO+GsN2Eg2J7DkRiK6SBnndz0Z6DHRshmWhpJzlgPTIIe6hO4DmTIhJAK4PVDxUiKsp7qfTUMtmmAyJgMgOQLheNghv8auxVm6MsA+AogCEK5UzxFwitoOFOA/gX7Aqco3S2phKiBIAzodpByCTCF2Gyt00S5cxlTKxzI6F5L2dxZRYxr4b0pjEwuLzRSX8GguLSbujspPOLCsWjS6fuYUDGJrEyVZrqF7Ih/zJAE2aetQptSJRNMWKqEtYWPR79QAOKVI6wBHh7H7t7YDox+SJUi8M7DBQb3bUoycNNHYLbL06q7Ad55JPe2KnM5VwWjuWsBuEUeEwOc50bBt435fQWXHPKkWUuxx1K/UhQxSrFg/7GPjKQeiX3B4RuP74ZgaqxaMxirUmNjCt9Bd3arGljHu1awCN/k0yAHfRyjzztFKOWQPf6NVytwnA78qJ4C7ppPsgCmR71+Ydbitlk9wd6PxIlNtkgdypL7Aicmwyzpak6R4VYWYx6J8aIsoA6wOf8YL7W/pY6ncbZSLylNHXZXZ59rZuTc+zylz1DHnmw71GRwf/kmayEZPV7OOv5IZ7sbhUx5dznGYvG1zySpg7eJ7vHMOUHu/xpX5A+yLPxA1oZ+iii3GmgAwyKaEozumTHtDG0npDoBF0w1UYmpHKZo77DtmPs9lkyJ5iTLuE9VRSRoQCckhnlr8ZZVD8jfCj6d8I/wOPwLElc7fh5gAAAABJRU5ErkJggg==\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./invitation.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./invitation.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"balance_wp\"},[_c('div',{staticClass:\"invi_wrap\"},[(!_vm.isUnlocked)?_c('div',[_c('p',[_vm._v(\"请先解锁邀请系统\")]),_c('button',{attrs:{\"type\":\"\"},on:{\"click\":_vm.validatePin}},[_vm._v(\"花费\"+_vm._s(_vm.value)+\"ETH解锁邀请系统\")])]):_vm._e(),(_vm.isUnlocked)?_c('div',{staticClass:\"unlocked\"},[_c('p',[_vm._v(\"您的邀请码\")]),_c('span',[_vm._v(_vm._s(_vm.$store.state.playerInfo.pid))])]):_vm._e(),_c('div',{staticClass:\"rule\"},[_c('img',{attrs:{\"src\":require(\"../assets/img/src_assets_images_wenhao.png\"),\"alt\":\"\"},on:{\"click\":_vm.changeTipsStatus}}),_c('span',[_vm._v(\"邀请系统规则\")])])]),_c('TabList',{attrs:{\"list\":_vm.swichList}}),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"balance_wp\">\r\n\t\t<div class=\"invi_wrap\">\r\n\r\n\t\t\t<div v-if=\"!isUnlocked\">\r\n\t\t\t\t<p>请先解锁邀请系统</p>\r\n\t\t\t\t<button type=\"\" @click=\"validatePin\">花费{{value}}ETH解锁邀请系统</button>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div v-if=\"isUnlocked\" class=\"unlocked\">\r\n\t\t\t\t<p>您的邀请码</p>\r\n\t\t\t\t<span>{{$store.state.playerInfo.pid}}</span>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"rule\"><img src=\"../assets/img/src_assets_images_wenhao.png\" alt=\"\" @click=\"changeTipsStatus\"><span>邀请系统规则</span></div>\r\n\t\t</div>\r\n\t\t<TabList :list=\"swichList\"></TabList>\r\n\t\t<router-view></router-view>\r\n\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport TabList from '../components/switch';\r\n\timport EthereumTx from 'ethereumjs-tx';\r\n\timport { v_format, v_num, v_int, v_int2, v_range } from '../assets/js/validate.js';\r\n\timport { MessageBox } from 'mint-ui';\r\n\timport bus from '../assets/js/eventBus.js';\r\n\texport default {\r\n\t\tname:'invitation',\r\n\t\tcomponents:{TabList},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tswichList:[\r\n\t\t\t\t{name:'当前轮次',to:'/main/invitation/turn'},\r\n\t\t\t\t{name:'投资总计',to:'/main/invitation/total'},\r\n\t\t\t\t],\r\n\t\t\t\tvalue:0.01,\r\n\t\t\t\ttxParams:{gasPrice:0,nonce:0,gasLimit:3e6},\r\n\t\t\t\tloading:false,\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\t//监听加载状态触发在mian.vue中的自定义事件\r\n\t\t\tloading(v) {\r\n\t\t\t\tbus.$emit('loading',v);\r\n\t\t\t},\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\tisUnlocked() {\r\n\t\t\t\treturn this.$store.state.playerInfo.name > 0 ? true : false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmethods:{\r\n\t\t\tchangeTipsStatus() {\r\n\t\t\t\tbus.$emit('tipsChange',{index:1,status:true});\r\n\t\t\t},\r\n\t\t\t//验证PIN码\r\n\t\t\tvalidatePin() {\r\n\r\n\t\t\t\tif (!v_num('钱包ETH', this.value, this.balance)) return; //验证钱包eth余额是否足够\r\n\r\n\t\t\t\tMessageBox.prompt('请输入钱包PIN码','PIN码',{inputType:'password'}).then(\r\n\t\t\t\t\t({ value, action }) => {\r\n\r\n\t\t\t\t\t\tif (!v_format('PIN码',value)) return; //验证非空\r\n\r\n\t\t\t\t\t\tthis.loading = true;\r\n\t\t\t\t\t\tconst privateKey = this.decrypt(localStorage.getItem('newPrivateKey'),value);//获取私钥字符串\r\n\t\t\t\t\t\tif ( privateKey === '') {\r\n\t\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\tmessage:'PIN码错误',\r\n\t\t\t\t\t\t\t\tduration:1500\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n         \t\t\t\tthis.unlock(privateKey);\t\r\n\t\t\t\t\t},\r\n\t\t\t\t\t()=> {\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t},\r\n\r\n\t\t\tunlock(privateKey) {\r\n\t\t\t\t//生成唯一字符串，取出邀请码\r\n\t\t\t\tconst regName = Date.parse(new Date()).toString(16),\r\n\t\t\t\taffId = localStorage.getItem('invitationId');\r\n\t\t\t\tthis.getGasPriceAndNonce().then((results) => {\r\n\r\n\t\t\t\t\tthis.txParams.gasPrice = results[0];\r\n\t\t\t\t\tthis.txParams.nonce = results[1];\r\n\r\n\t\t\t\t\tconst rawTransaction = {\r\n\t\t\t\t\t\tfrom: this.address,\r\n\t\t\t\t\t\tnonce: `0x${this.txParams.nonce.toString(16)}`,\r\n\t\t\t\t\t\tgasPrice: `0x${this.txParams.gasPrice.toString(16)}`,\r\n\t\t\t\t\t\tgasLimit: `0x${this.txParams.gasLimit.toString(16)}`,\r\n\t\t\t\t\t\tto: this.contractAddress,\r\n\t\t\t\t\t\tvalue:`0x${(this.value * 1e18).toString(16)}`,\r\n\t\t\t\t\t\tdata:this.contract.registerNameXID.getData(regName,affId,true,{from:this.address})\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tconst tx = new EthereumTx(rawTransaction);\r\n\t\t\t\t\ttx.sign(keythereum.str2buf(privateKey));//获取真正的私钥(buffer)\r\n       \t\t\t\tconst serializedTx = `0x${tx.serialize().toString('hex')}`; //交易参数序列化\r\n\r\n       \t\t\t\treturn new Promise((resolve, reject) => {\r\n       \t\t\t\t\tthis.web3.eth.sendRawTransaction(serializedTx, (err, hash)=> {\r\n       \t\t\t\t\t\tif (!err) {\r\n       \t\t\t\t\t\t\tthis.loading = false;\r\n       \t\t\t\t\t\t\tthis.$message({\r\n       \t\t\t\t\t\t\t\tmessage:'解锁成功',\r\n       \t\t\t\t\t\t\t\tduration:1500\r\n       \t\t\t\t\t\t\t});\r\n       \t\t\t\t\t\t\tresolve(hash);\r\n       \t\t\t\t\t\t}\r\n       \t\t\t\t\t});\r\n       \t\t\t\t});\r\n\r\n       \t\t\t}).then(() => {\r\n       \t\t\t\tthis.$store.dispatch('getPlayerInfo');\r\n       \t\t\t});\r\n       \t\t}\r\n       \t},\r\n       }\r\n   </script>\r\n   <style lang='scss'>\r\n   \t.balance_wp .switch_list li {\r\n   \t\twidth:50%;\r\n   \t}\r\n   \t.invi_wrap{\r\n   \t\tpadding:15px;\r\n   \t\tbackground-color:#d8e1e8;\r\n   \t\tp{\r\n   \t\t\t@include fl(16px,normal,#777c82);\r\n   \t\t\ttext-align: center;\r\n   \t\t\tmargin:40px 0;\r\n   \t\t}\r\n   \t\t.unlocked{\r\n   \t\t\tp{\r\n   \t\t\t\tmargin:10px 0;\r\n   \t\t\t}\r\n   \t\t\tspan{\r\n   \t\t\t\tdisplay: block;\r\n   \t\t\t\t@include fl(16px,normal,#000);\r\n   \t\t\t\ttext-align: center;\r\n   \t\t\t}\r\n   \t\t}\r\n   \t\tbutton{\r\n   \t\t\tdisplay: block;\r\n   \t\t\tmargin:60px auto;\r\n   \t\t\tmargin-top:0;\r\n   \t\t\twidth:3.6rem;\r\n   \t\t\theight:.9rem;\r\n   \t\t\tpadding:2px 30px;\r\n   \t\t\tbackground-color:#282c35;\r\n   \t\t\t@include fl(14px,.35rem,#fff);\r\n   \t\t\tborder-radius:3px;\r\n   \t\t}\r\n   \t\t.rule{\r\n   \t\t\ttext-align: center;\r\n   \t\t\tline-height:.8rem;\r\n   \t\t\tspan{\r\n   \t\t\t\tvertical-align: middle;\r\n   \t\t\t}\r\n   \t\t\timg{\r\n   \t\t\t\theight:.4rem;\r\n   \t\t\t\tvertical-align: middle;\r\n   \t\t\t\tmargin-right:8px;\r\n   \t\t\t}\r\n   \t\t}\r\n   \t}\r\n   </style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./invitation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./invitation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./invitation.vue?vue&type=template&id=49a4348e&\"\nimport script from \"./invitation.vue?vue&type=script&lang=js&\"\nexport * from \"./invitation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./invitation.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"invitation.vue\"\nexport default component.exports"],"sourceRoot":""}